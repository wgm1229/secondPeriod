## rem布局

1.rem单位介绍
> 整个页面所有元素的尺寸，相对于html根节点的fontSize进行动态变化
> rem是相对单位
> px 是绝对单位

2.rem完成页面动态适配
```
let el = document.querySelector('html');
el.style.fontSize = el.clientWidth/20 + 'px';
window.addEventListener('resize',()=>{
  el.style.fontSize = el.clientWidth/20 + 'px';
})
// 前提条件，项目所有设计图宽度都是750，
// 1. 如果屏幕宽度750px
  // 1rem = 750/20 px
// 2. 如果设计图中有个元素恰好就是750px
// 应该给这个元素设置多少rem？    20rem
// 3. 如果设计图中有个元素敲好是 50px
// 应该给这个元素设置多少rem？   50/37.5

// 结论：
// 当我为某个元素添加尺寸的时候，只需要让 尺寸=测量的px / 37.5 rem
```
3.动态适配的代码是在public/index.html中写入


## Axios 模块发起http请求
[文档](http://www.axios-js.com/)

1.安装
```
npm i axios -S
```
2.基本的使用
> baseURL直接写在组件中，不方便项目迁移
> 开发环境----生成环境

可以直接在Singer.vue组件中引入axios
在get中写入服务器地址可以直接拿到数据包
```
import axios from 'axios'

    export default {        
        created () {
            axios.get('https://shopapi.smartisan.com/product/home')
            .then(res=>{
                console.log(res)
            });
        },
    }
```

3.对axios进行独立的集中封装
src/utils/request.js
```
import axios from 'axios'
let instance = axios.create({
  baseURL: 'https://localhost:3000',  //开发环境的接口地址
  // baseURL:'https://shopapi.smartisan.com', //生产环境的接口地址
})

export default instance; //导出示例对象
```

在Singer.vue组件中导入request.js
通过组件的形式进行ajax(axios)请求
```
import request from '../utils/request'
import 组件名 from '../utils/request'
```

这时就需要写组件名.get('路径后缀')来访问服务器地址，baseURL会直接加上去不需要写
```
created () {    
    request.get('/product/home')
    .then(res=>{
        console.log(res)
    });
},
```

## 为项目准备服务器接口
> 第三方服务代理的方式，将我们的请求，转发到QQ音乐服务器，去抓取数据
> QQMusicApi项目代码是不需要改动的

1.数据接口文档
[地址](https://jsososo.github.io/QQMusicApi/#/)

2.克隆服务端api接口项目代码
```
git clone https://github.com/jsososo/QQMusicApi.git
```

3.安装项目依赖并启动
```
cd QQMusicApi   进入项目
npm i         安装依赖
npm run start  启动服务接口
```

## 跨域问题的解决方案
1.跨域报错
```
been blocked by CORS policy: No 'Access-Control-Allow-Origin' 
header is present on the requested resource.
```

2.通过后端的配置，开启跨域访问  [了解这个方案]
> 在公司真实项目开发过程中，可以跟后端沟通，让后端来配置解决
如果是Nodejs做服务端开发，可以快速使用cors模块解决


3.在vue项目中使用本地代理来完成 【掌握】
跨域表现： localhost:8080--跨域---远程服务器(http://localhost:3300/)跨端口
解决方案： localhost:8080---本地代理服务器--不存在跨域--远程服务器
3-1. 在项目根路径下，新建vue.config.js文件
3-2. 在该文件中写入代理配置
 '/hehe'---代理地址名称
  ```
  module.exports = { //commonjs规范
    devServer:{ //本地服务
      proxy:{  //本地代理
        '/hehe':{ //标致代理接口的路径字段
          target: 'http://localhost:3300', //代理请求的目标服务器
          pathRewrite:{
            '^/hehe':''  //将多余的/hehe从整个接口路径中剔除
            // 1. 我们使用/hehe/singer/list 向代理服务发请求
            // 2. 如果写了pathRewrite，那么经过代理服务转发后请求的目标路径就是
                  // http://localhost:3300/singer/list
            // 3. 如果不写pathRewrite，那么经过代理服务转发后请求的目标路径就是
                  // http://localhost:3300/hehe/singer/list
                  // 这个接口并不存在
          }
        }
      }
    }
  }
  ```

3-3.在request.js文件中不需要再写baseURL
  ```
  import axios from 'axios'

  let instance = axios.create({
    // baseURL: 'http://localhost:3300',  //开发环境的接口地址
    // baseURL:'https://shopapi.smartisan.com', //生产环境的接口地址
  })

  export default instance;
  ```
3-4.在组件中去请求代理地址
  request.get('/代理地址名称/路径后缀')
```
 created () {
  request.get('/hehe/singer/list')
      .then(res=>{
        console.log(res);
        this.slist = res.data.data.list
      })
},
```
3-5.npm run serve重启项目，使得新配置生效


## 前后端交互流程

前端发起axios请求 -----http请求--------------->服务器
                                                 |
前端拿到数据包并渲染---服务器下发的数据包 <-------  |


## 总流程

1. 在项目中完成rem适配的准备工作
  + public/index.html加入动态rem代码
  + style/index.less      //整合样式方法函数
    - 在里面引入style/var.less   //定义一些样式变量
  + 在Singer.vue组件中引入index.less   //使用全局样式变量

2. 通过路由引导，显示Singer.vue

3. 如何通过axios发起http请求
  + 统一做axios封装(全局写入baseURL)     后端接口没有跨域限制的情况下

4. 跨域问题的解决方案
  + 本地代理解决跨域    vue.config.js

5. 在Singer.vue中发起请求，获取数据并完成渲染
                                      