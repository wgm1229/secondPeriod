## 音频操作相关的JS方法及属性
1.音频特有的事件监听
  + canplay    音频文件比较特殊，通过链接加载一定资源信息后，才能正常播放
  + timeupdate  只要音乐的播放时间发生变化，就会被触发

2.通过方法操作音频文件
  + audio.play()      触发音频播放的方法
  + audio.pause()     触发音频暂停的方法

3.修改音频文件的属性
  + audio.currentTime    可读、可写
    ```
    let time = audio.currentTime   读取当前音乐的播放时间
    audio.currentTime = 60     设置音频的播放时间为第60s
    ```
  + audio.duration      可读取音频总时长

## 处理歌词效果

1. 获取歌词数据包
1.1在Player组件中给子组件Lyric传递参数songid
```
<Lyric :songid="songid"></Lyric>
```
1.2在Lyric中接收参数songid
```
props: ['songid'],
```
1.3安装lyric-parser解析歌词模块
```
 npm install lyric-parser
```
1.4使用处理歌词，返回txt字符串
```
 import Lyric from 'lyric-parser'
```
```
  mounted () {
      getLyric(this.songid).then(res=>{
        //   console.log(res)
          let lrc = res.data.data.lyric
          this.lyric = new Lyric(lrc, (obj)=>{
              console.log(obj.txt)
              this.text=obj.txt
          })
          this.lyric.play()//让歌词动起来
      })
  },
```
1.5渲染子组件
```
<div class="lyric">{{text}}</div>
```
2.使用lyric-parser模块处理歌词动态交互
[模块使用方式](https://github.com/ustbhuangyi/lyric-parser#readme)
  + play   触发歌词自动播放，重头开始
  + stop   歌词停止播放
  + seek(newTime)    让歌词跳到指定时间位置
  + togglePlay()    在当前时间状态下，改变歌词播放状态

3.在vuex状态机中添加的数据
  + songlist   歌曲列表的数据存储
  + currentSong   记录当前正在播放歌曲的下标
store/player.js
```
state: ()=>{
        return {
            isPlay:false,
            songlist:[],
            currentSong:0
        }
    },
    mutations: {
        isPlayMut(state,bool){
            state.isPlay = bool
        },
        songListMut(state,list){
            state.songlist = list
        },
        currentMut(state,idx){
            state.currentSong = idx
        }
    }
```
## 歌曲的切换
1.歌曲信息切换  【已完成】
Detail组件
绑定点击事件handlePlayer传递mid,index
```
<li v-for="(item,index) in songList" :key='item.id'
              @click="handlePlayer(item.mid,index)">
```
将songList和当前歌曲的index传到store/player.js
```
handlePlayer(songmid,index) {
  this.$router.push(`/player/${songmid}`);
  this.$store.commit('player/currentMut',index)
  this.$store.commit('player/songListMut',this.songList)
},
```

Player组件
```
<!-- 歌曲名称 -->
<div class='top'> 
      <span>v</span>
      {{songs.name}}
    </div>
<!-- 歌手 -->
<p class='name'>{{songs.singer[0].name}}</p>
```
```
computed: {
  isPlay() {
    return this.$store.state.player.isPlay 
  },
  songs(){ //songs-----songlist
    let {songlist,currentSong} = this.$store.state.player
    console.log(songlist[currentSong])
    return songlist[currentSong]
  },
  currentSong(){
    return this.$store.state.player.currentSong
  },
```
  + 歌曲的播放链接变化   【已完成】
  Player组件
  ```
  nextSong(){
    let next = this.currentSong+1
    this.$store.commit('player/currentMut',next) //切换歌曲数据包
    this.songurl = songs[this.song.mid] //切换歌曲路径
  }
  ```
  + 歌词信息的切换    【思考】
