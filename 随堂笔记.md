## Singer.vue跳转至Detail页面
> 编程式导航

1.在router/index.js中绑定Detail路径和组件

2.在Singer.vue中通过绑定点击事件=>传递请求的参数,并跳转Detail路径
this.$router.push({
  name:'name名',
  params:{参数1,参数2,...}
})
```
this.$router.push({
        name:'detail',
        params:{
          singer_name,
          singer_mid
        }
      })
```


3.Detail.vue获取新的数据包

3.1在Detail.vue中使用router获取参数的方法拿到传递过来的参数

this.$route.params
```
let {params} = this.$route
```

3.2通过传递过来的参数发起ajax请求,拿到歌手热门歌曲的数据包
在api/singer.js下创建getSongs(参数)函数
```
export const getSongs = (mid) =>{
    return request.get(`hehe/singer/songs?singermid=${mid}`)
}
```

3.4在Detail.vue中引用getSongs函数
```
import { getSongs } from "../api/singer";
```

3.5在Detail.vue的create()中使用getSongs函数
```
getSongs(singer_mid).then(res=>{
          console.log(res)
          this.songList = res.data.data.list
      })
```
3.6渲染页面

## 组件滑动
better-scroll
组件滑动中出现的问题:
滑动不了？
问题原因/解决方法：
1.父元素的宽或高 < 子元素的宽或高
2.父元素设置超出隐藏
overflow:hidden;
3.没有配置
```
import BScroll from "@better-scroll/core";

let scroll1 = new BScroll(this.$refs.wrapper1, {});
```
4.需要滑动效果的地方中有ajax请求
在create中添加配置的话，只是vue实例创建完毕，然而ajax请求出来的数据还没加载进来，所以识别不到子元素的高度或者宽度比父元素高

只需在数据更新完毕之后进行配置即可
update(){
  let scroll1 = new BScroll(this.$refs.wrapper1, {});
}

## 路由传参完成歌手详情页展示
1. 在Singer.vue点击歌手，传递歌手id
```
handleDetail(singermid){ //跳转详情页，并携带歌手mid
  this.$router.push({
    name:'detail',
    params:{
      singermid
    }
  })
},
```

2. 在Detail.vue 中提取歌手id，加载歌手详情数据
```
created() {
    console.log(this.$route.params)
  },
```

3. vue-router中编程时导航传参

## 路径别名
> 在vue-cli环境下的.vue组件中，可以直接通过@找到src路径


## Player组件功能流程  【预习】

1. 从上个页面Detail.vue接收一个歌曲id
> vue-router 动态路由的方式传参
  + 设置路由形参   router/index.js
  + 传递路由实参   Detail.vue  点击某个歌曲的时候
  + 提取路由参数并使用   Player.vue  的生命周期中接收

## 播放器功能点分析
> 会使用vuex进行歌曲数据的集中管理

1.vue.config.js设置一个新的代理
```
'/music': { //标致代理接口的路径字段
        target: 'https://api.qq.jsososo.com', //代理请求的目标服务器
        pathRewrite: {
          '^/music': ''
        }
      }
```
2.api/singer.js创建新的请求函数
```
//请求歌曲播放链接
export const getSongUrl = (songid) =>{
  return request.get(`/music/song/urls?id=${songid}`)

}
```

3.在Detail.vue组件中 引入请求函数 => 使用请求函数 =>渲染页面
```
import { getSongUrl } from "../api/singer";
```

```
getSongUrl(id).then(res=>{
            console.log(res)
            this.songurl = res.data.data[id]
        })
```

```
<audio :src="songurl" autoplay></audio>
```


  + 根据歌曲id，加载歌曲播放链接，设置给audio
  + 原生JS对于音频文件的操作方法 【提前复习】
    - currentTime    当前播放时间
    - duration       音乐总时长
    - paused()       暂停
    - play()         播放
    - volume         控制音量
  + 音乐进度条
    - 能够根据音乐的播放进度，动态变化
    - 手动拖拽进度条，改变音乐的播放位置
    - 控制歌词的动态滚动

  + 歌词
    - 歌词随音乐动态变化
    - 歌词随进度条动态变化

  + 播放控制
    - 上一曲、下一曲
    - 播放、暂停
    - 播放模式[顺序、随机、单曲循环]

  + 播放列表
    - 数据初始化
    - 点击切换歌曲
    - 列表的收缩\展开

## 任务梳理
1. 从Singer.vue跳转至Detail页面
> 编程式导航

2. 动态获取歌手信息，并渲染Detail页面，完成交互

3. 从Detail.vue中跳转至Player.vue页面
> 动态路由

4. 歌曲链接的获取与播放使用
